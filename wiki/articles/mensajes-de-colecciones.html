<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Mensajes de colecciones</title>
  <meta property="og:title" content="Mensajes de colecciones" />






<link rel="canonical" href="wiki.uqbar.org/wiki/articles/mensajes-de-colecciones.html" />
<meta property="og:url" content="wiki.uqbar.org/wiki/articles/mensajes-de-colecciones.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2017-09-08T12:53:01-03:00" />






  <meta property="keywords" content="" />











    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
    <link type="text/plain" rel="author" href="/humans.txt"/>
    <link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">

    <link rel="stylesheet" href="/assets/app-03d85529abca8a6b9780ed56673aae09.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><a id="pagetitle" href="/">uqbar-wiki</a></div>
        </li>
        <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <div class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
            <li class="has-dropdown">
                <a href="#">Ayuda</a>
                <ul class="dropdown">
                    <li><a class="link article_link" href="/wiki/articles/FAQ.html">FAQ</a></li>
                    <li class="link article_link" role="menuitem"><a href="/wiki/articles/como-empezar.html">Cómo colaborar</a></li>
                </ul>
            </li>
        </ul>

        <!-- Left Nav Section -->
        <ul class="left">
            <li class="has-dropdown">
                <a href="#">Navegación</a>
                <ul class="dropdown">
                    <li class="link article_link" role="menuitem"><a href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas de programación</a></li>
                    <li class="link article_link" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño - Algoritmos II</a></li>
                    <li class="link article_link" role="menuitem"><a href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas avanzadas de programación</a></li>
                    <li class="link article_link" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos III</a></li>
                </ul>
            </li>
        </ul>
    </div>

</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 10px;">
    <div class="rows" align="center">
        <img src="/img/logoUqbar.jpg" height="70%" width="70%">
    </div>
    <div align="center">
    	<p>
    		<a href="http://www.uqbar-project.org/">Conocenos</a> 
    	</p>
    </div>

    <hr>

    <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Links" role="menu">
        <li class="button" role="menuitem"><a href="/">Home</a></li>
        <li class="button" role="menuitem"><a href="/articles">Lista de articulos</a></li>
    </ul>

    <hr>

	<ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Materias" role="menu">
            <li class="button" role="menuitem"><a href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas de programación</a></li>
        <li class="button" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño - Algoritmos II</a></li>
        <li class="button" role="menuitem"><a href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas avanzadas de programación</a></li>
        <li class="button" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos III</a></li>
    </ul>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        <i>Mensajes de colecciones</i>
    </h1>

    <div id="siteSub">De Uqbar wiki</div>
</div>



<div id="article_content">
    <p>Este es un pequeño resumen de mensajes que entiende una colección. Lo que sigue sirve para todos los <a href="sabores-de-colecciones.html">sabores de colecciones</a>.</p>

<p>¿Qué puedo hacer con los conjuntos de objetos? Muchas cosas, las colecciones entienden mensajes muy útiles para ayudarnos a abstraernos un poquito. Vamos a separarlos en los que tienen <a href="transparencia-referencial--efecto-de-lado-y-asignacion-destructiva.html">efecto colateral</a> sobre la colección receptora y los que no.</p>

<h2 id="con-efecto">Con efecto</h2>

<p>Estos mensajes alteran a la colección que recibe el mensaje. Si no quiero perder la colección original puedo o bien copiar la colección mandándole shallowCopy y luego usar estos mensajes, o replantearme si no quería usar alguno de los mensajes de colecciones sin efecto :)</p>

<h3 id="agregarle-objetos">Agregarle objetos</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros add: pepita.</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.add(pepita)</code></p>

<p>También existe el mensaje addAll: en Smalltalk y addAll(conjunto) en Wollok que recibe otra colección y agrega todos los elementos del parámetro a la colección receptora.</p>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros addAll: picaflores</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.addAll(picaflores)</code></p>

<h3 id="quitarle-objetos">Quitarle objetos</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros remove: pepita.</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.remove(pepita)</code></p>

<p>Análogamente al addAll:/addAll(conjunto), existe el removeAll:/removeAll(conjunto) que le quita a la receptora todos los que estén en la colección parametrizada.</p>

<h2 id="sin-efecto">Sin efecto</h2>

<p>Estos mensajes se pueden mandar tantas veces como queramos sin miedo de alterar la colección receptora.</p>

<h3 id="saber-cuántos-objetos-tiene">Saber cuántos objetos tiene</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros size.</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.size()</code></p>

<p>¿Que me devuelve? Un objeto número con la cantidad de objetos que conoce.</p>

<h3 id="preguntarle-si-tiene-un-objeto">Preguntarle si tiene un objeto</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros includes: pepita. </code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.contains(pepita)</code></p>

<p>¿Que me devuelve? Un objeto booleano, true o false</p>

<h3 id="unirlo-o-intersectarlo-con-otro-conjunto">Unirlo o intersectarlo con otro conjunto</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">golondrinas union: picaflores.</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">golondrinas.union(picaflores)</code></p>

<p>¿Que me devuelve? Una nueva colección con la unión de ambas.</p>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">aves intersection: voladores.</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">aves.intersection(voladores)</code></p>

<p>¿Que me devuelve? Una nueva colección con la intersección de ambas.</p>

<p>Siendo que la unión y la intersección está pensada para conjuntos matemáticos, estos mensajes sólo lo entienden los sets.</p>

<p>Además en Wollok puede hacerse:</p>

<p><code class="highlighter-rouge">golondrinas + picaflores</code></p>

<p>Que retorna la concatenación de ambos conjuntos, retornando una colección del mismo sabor que la receptora.</p>

<h3 id="seleccionar-los-elementos-que-cumplen-con-un-criterio">Seleccionar los elementos que cumplen con un criterio</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros select: [:unPajaro | unPajaro estaDebil ].</code></p>

<p><code class="highlighter-rouge">usuarios select: [:unUsuario | unUsuario deuda &gt; 1000].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.filter({unPajaro =&gt; unPajaro.estaDebil()})</code></p>

<p><code class="highlighter-rouge">usuarios.filter({unUsuario =&gt; unUsuario.deuda() &gt; 1000})</code></p>

<p>¿Que me devuelve? Una nueva colección con los objetos que cuando se los evalúa con el bloque, dan true.</p>

<h3 id="buscar-algún-elementos-que-cumpla-con-un-criterio">Buscar algún elementos que cumpla con un criterio</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros detect: [:unPajaro | unPajaro estaDebil ].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.find({unPajaro =&gt; unPajaro.estaDebil()})</code></p>

<p>¿Que me devuelve? Un objeto de la colección que cuando se lo evalúe con el bloque, de true.</p>

<p>¿Qué pasa si no hay ningún objeto que cumpla la condición? Explota, lo cual tiene sentido porque no sabe qué hacer si no lo tiene. Por eso existe otra versión en la cual podemos decirle qué devolvernos si no hay ninguno.</p>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros detect: [:unPajaro | unPajaro estaDebil ] ifNone: [ pajaros anyOne ].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.findOrElse({unPajaro =&gt; unPajaro.estaDebil()}, { pajaros.anyOne() })</code></p>

<h3 id="recolectar-el-resultado-de-hacer-algo-con-cada-elemento">Recolectar el resultado de hacer algo con cada elemento</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros collect: [:unPajaro | unPajaro ultimoLugarDondeFue].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.map({unPajaro =&gt; unPajaro.ultimoLugarDondeFue()})</code></p>

<p>¿Que me devuelve? Una nueva colección con los objetos que devuelve el bloque al aplicarlo con cada elemento.</p>

<h3 id="verificar-si-todos-los-elementos-de-la-colección-cumplen-con-un-criterio">Verificar si todos los elementos de la colección cumplen con un criterio</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros allSatisfy: [:unPajaro | unPajaro estaDebil].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.all({unPajaro =&gt; unPajaro.estaDebil()})</code></p>

<p>¿Que me devuelve? un booleano que indique si todos los objetos de la colección dan true al evaluarlos con el bloque.</p>

<h3 id="verificar-si-algún-elemento-de-la-colección-cumple-con-un-criterio">Verificar si algún elemento de la colección cumple con un criterio</h3>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros anySatisfy: [:unPajaro | unPajaro estaDebil].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.any({unPajaro =&gt; unPajaro.estaDebil()})</code></p>

<p>¿Que me devuelve? un booleano que indique si alguno de los objetos de la colección da true al evaluarlo con el bloque.</p>

<h3 id="reducir-una-colección-haciendo-algo-un-elemento-y-el-resultado-de-la-reducción-con-el-elemento-anterior">Reducir una colección haciendo algo un elemento y el resultado de la reducción con el elemento anterior</h3>

<p>Si queremos evaluar un bloque de dos parámetros con cada elemento de la colección, usando como primer parámetro la evaluación previa, y como segundo parámetro ese elemento (o sea, lo que en funcional vimos como <a href="fold.html">fold</a>)</p>

<p><strong>Smalltalk</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>pajaros inject: 0 into: [:inicial :unPajaro | inicial + unPajaro peso].  "sumatoria de pesos"
pajaros inject: (pajaros anyOne) into: [:masFuerte :unPajaro | 
  (unPajaro energia &lt; masFuerte energia) ifTrue: [unPajaro] ifFalse: [masFuerte]] "maximo segun energia"
</code></pre>
</div>

<p><strong>Wollok</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>pajaros.fold(0, {inicial, unPajaro =&gt; inicial + unPajaro.peso()}) // sumatoria de pesos
pajaros.fold(pajaros.anyOne(), {masFuerte, unPajaro =&gt; 
  if(unPajaro.energia() &lt; masFuerte.energia()) unPajaro else masFuerte }) // maximo segun energia
</code></pre>
</div>

<p>¿Que me devuelve? La ultima evaluación del bloque.</p>

<p>¿Para qué me sirve? Para muchas cosas: obtener el que maximice o minimice algo, obtener el resultado de una operación sobre todos (p.ej. sumatoria), y más. Por lo general existen operaciones de más alto nivel para la mayoría de las reducciones más comunes, de ser así obviamente es preferible usar esos mensajes en vez de hacer la reducción.</p>

<p>Por ejemplo, en Wollok podríamos haber hecho directamente:</p>

<p><code class="highlighter-rouge">pajaros.sum({unPajaro =&gt; unPajaro.peso()})</code>
<code class="highlighter-rouge">pajaros.max({unPajaro =&gt; unPajaro.energia()})</code></p>

<h3 id="obtener-una-colección-de-otro-sabor">Obtener una colección de otro sabor</h3>

<p>En <strong>Smalltalk</strong> existen los mensajes asSet, asBag, asOrderedCollection y asSortedCollection: que retornan una colección nueva a partir de la receptora que tiene otras características (ver <a href="sabores-de-colecciones.html">sabores de colecciones</a>). En particular asSet y asSortedCollection: son de uso más común para quitar repetidos u ordenar en base a un criterio respectivamente.</p>

<p><code class="highlighter-rouge">usuarios.asSortedCollection: [:usuarioJoven :usuarioViejo | usuarioJoven edad &lt; usuarioViejo edad ]</code></p>

<p>En <strong>Wollok</strong>, al sólo haber sets y listas, lo que ambas entienden son <code class="highlighter-rouge">asSet()</code> y <code class="highlighter-rouge">asList()</code>. Las listas ordenadas por un criterio pueden obtenerse mediante el mensaje <code class="highlighter-rouge">sortedBy(criterio)</code>, que retorna una nueva colección con los elementos de la receptora ordenadas según el bloque recibido.</p>

<p><code class="highlighter-rouge">usuarios.sortedBy({ usuarioJoven, usuarioViejo =&gt; usuarioJoven.edad() &lt; usuarioViejo.edad() })</code></p>

<p>A su vez en Wollok también existe el mensaje <code class="highlighter-rouge">sortBy(criterio)</code> que se diferencia en que en vez de retornar una nueva colección ordenada de esa forma, modifica la colección receptora para quedar ordenada así. O sea, <strong>produce un efecto colateral</strong>.</p>

<h2 id="y-la-iteración">¿Y la iteración?</h2>

<p>El mensaje do: en Smalltalk o forEach(bloque) en Wollok, sirve para hacer algo con cada objeto de la colección. Este mensaje en sí mismo no tiene efecto colateral, pero tampoco tiene un valor de retorno que pueda interesarnos. Entonces, ¿cuándo se usa? Sólo tiene sentido usar este mensaje cuando lo que queremos hacer sobre cada elemento (o sea, el bloque) sí produce un efecto.</p>

<p><strong>Smalltalk</strong></p>

<p><code class="highlighter-rouge">pajaros do: [:unPajaro | unPajaro vola: 100 ].</code></p>

<p><strong>Wollok</strong></p>

<p><code class="highlighter-rouge">pajaros.forEach({unPajaro =&gt; unPajaro.vola(100)})</code></p>

<p>Yo no pretendo recolectar resultados, sólo quiero que pasen cosas con cada elemento.</p>

<p><strong>Importante:</strong> no usar el do:/forEach para todo, los mensajes que vimos anteriormente son abtracciones mucho más ricas que nos permiten concentrarnos en nuestro objetivo y no en el algoritmo para lograr el resultado, <strong>seamos declarativos</strong>!</p>

</div>



<div id="article_metadata">
    <p><i>Latest update on September 07, 2017 by
        GitHub</i></p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>3</td>
                                <td>307</td>
                                <td>73</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Fernando Dodino</td>
                                <td>fernand...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Mariana</td>
                                <td>mmatos8...</td>
                                <td>2</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>f0cfbed</td>
                        <td>Thu Sep 7 20:52:32 2017 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Update mensajes-de-colecciones.md</td>
                    </tr>
                    
                    <tr>
                        <td>2d5b8e0</td>
                        <td>Thu Sep 7 20:49:27 2017 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Update mensajes-de-colecciones.md</td>
                    </tr>
                    
                    <tr>
                        <td>917a5fe</td>
                        <td>Mon Jul 17 23:16:02 2017 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Update deploy-en-maven-central.md</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul>

</div>


</div>


<div id="footer">
    <div class="columns small-1 medium-2 large-3">
        <small>(C) 2015-17 Matthias Beyer - Ernesto Bossi</small>
    </div>

    <div class="columns small-11 medium-10 large-9">
    </div>

</div>

<script>
    'use strict';
</script>

<script src="/assets/jquery-9954088f87089c387789507249fa70d3.js"></script>
<script src="/assets/jquery.min-650c8b3af3d010ec559014c6e70b13c3.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/assets/foundation/foundation-8e0f071884576348dba555b27a4bcaa9.js"></script>
<script src="/assets/foundation/foundation.abide-fa5ce9fbf8301ae49154ebc752edc220.js"></script>
<script src="/assets/foundation/foundation.accordion-bcc423fb0c2a3d515ba85ff591171a8e.js"></script>
<script src="/assets/foundation/foundation.alert-609b779b55610f4916250faaa37d1cfc.js"></script>
<script src="/assets/foundation/foundation.clearing-167db0285c7a789f7f216183f9038ac4.js"></script>
<script src="/assets/foundation/foundation.dropdown-25aac997ca0ca5dc3c3094c266c8f5aa.js"></script>
<script src="/assets/foundation/foundation.equalizer-cbdd8079a6f777c37dd1314f9b17faec.js"></script>
<script src="/assets/foundation/foundation.interchange-6ef75863aff8abeff4de79554b62e1b9.js"></script>
<script src="/assets/foundation/foundation.joyride-7cce0075f55d456449419a92671a3874.js"></script>
<script src="/assets/foundation/foundation.magellan-dc0647982e238cf1db3113e50d1b85dd.js"></script>
<script src="/assets/foundation/foundation.offcanvas-61dc0fe57ed932800c4a09b92c1ba4e5.js"></script>
<script src="/assets/foundation/foundation.orbit-9698da4fd068f7b83b3e5c00aae63ab3.js"></script>
<script src="/assets/foundation/foundation.reveal-4944447a204c398659229cfd716786a1.js"></script>
<script src="/assets/foundation/foundation.slider-7ea4b29f663e7e1b52ddc9f7ca0458b3.js"></script>
<script src="/assets/foundation/foundation.tab-c2efa8f5f8b255b06db277c3f339a0c7.js"></script>
<script src="/assets/foundation/foundation.tooltip-4a5d212b8f811ff50bba6cc61a2b899a.js"></script>
<script src="/assets/foundation/foundation.topbar-4dd840d30430ff2146208830574ca615.js"></script>

<script src="/assets/jquery.cookie-61d99d4505fb2f5359bf351153c83f1d.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/assets/jekyll-search-2c27791d765f338cd196c9aa9a050936.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/assets/prism-1eea551ba45e704ef55167430bb80ce4.js"></script>
</body>
</html>
